(window.webpackJsonpPANkarzyki=window.webpackJsonpPANkarzyki||[]).push([[0],{297:function(e,t,a){e.exports=a(526)},526:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n),l=a(28),c=a(92),o=a(0),s=a.n(o),i=a(57),u=a.n(i),m=a(34),h=a(70),d=(a(303),a(30)),p=a(17),f=a(22),g=a(18),E=a(19),b=a(20);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=s.a.createContext(),k=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={isLogged:!!localStorage.getItem("token"),me:null},a.changeStore=function(e,t){a.setState(Object(d.a)({},e,t))},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement(w.Provider,{value:v({},this.state,{changeStore:this.changeStore})},this.props.children)}}]),t}(s.a.Component),j=w,O=function(){return{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}}},C=a(548),S=function(){var e=Object(o.useContext)(j),t=e.isLogged,a=e.changeStore;return s.a.createElement("div",null,s.a.createElement("div",{className:"center"},s.a.createElement("img",{alt:"nie ma obrazka",src:"/images/nowelogo.jpg"})),s.a.createElement(C.a,{secondary:!0},s.a.createElement(C.a.Item,{as:m.b,name:"PANkarzyki",to:"/"}),t&&s.a.createElement(C.a.Menu,null,s.a.createElement(C.a.Item,{as:m.c,name:"G\u0142\xf3wna",to:"/",activeClassName:"active",exact:!0}),s.a.createElement(C.a.Item,{as:m.c,name:"Terminarz",to:"/Schedule",activeClassName:"active"}),s.a.createElement(C.a.Item,{as:m.c,name:"Ligi",to:"/Leagues",activeClassName:"active"}),s.a.createElement(C.a.Item,{as:m.c,name:"Dru\u017cyny",to:"/Teams",activeClassName:"active"}),s.a.createElement(C.a.Item,{as:m.c,name:"Nowa Liga",to:"/NewLeague",activeClassName:"active"}),s.a.createElement(C.a.Item,{as:m.c,name:"Wyniki",to:"/Scores",activeClassName:"active"})),s.a.createElement(C.a.Item,{as:m.b,name:"Wyjd\u017a",to:"/",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("id"),a("isLogged",!1),a("me",null)},position:"right"})))},x=a(265),z=function(e){var t=e.component,a=Object(x.a)(e,["component"]),n=Object(o.useContext)(j).isLogged;return s.a.createElement(h.b,Object.assign({},a,{render:function(e){return n?s.a.createElement(t,e):s.a.createElement(h.a,{to:"/login"})}}))},D=function(){return s.a.createElement("div",{className:"container"},s.a.createElement("main",null,s.a.createElement("p",null,"O co chodzi? Gramy lig\u0119!! Dobierz si\u0119 w dru\u017cyn\u0119, zapisz do rozgrywek, zapisuj wyniki, sprawdzaj kto kogo z\u0142oi\u0142. Wy\u0142onimy zwyci\u0119zc\u0119! :) Wanna Join?")))},A=a(552),M=a(543),L=a(530),I=a(547),_=function(e){return s.a.createElement(I.a,{negative:!0},s.a.createElement(I.a.Header,null,e.header),s.a.createElement("p",null,e.paragraph))};_.defaultProps={header:"B\u0142\u0105d!",paragraph:"Spr\xf3buj ponownie"};var P=_,H=a(266),F=a.n(H),T=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).onFormSubmit=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,l,c,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=[a.state.termEmail,a.state.termPass],l=n[0],c=n[1],e.next=4,fetch("/api/login",{method:"POST",body:JSON.stringify({email:l,password:c}),headers:{"Content-Type":"application/json"}});case 4:if(200!==(o=e.sent).status){e.next=15;break}return s=o.headers.get("x-auth-token"),localStorage.setItem("token",s),localStorage.setItem("id",F()(s)._id),e.next=11,o.json();case 11:a.context.changeStore("isLogged",!0),a.setState({isLogged:!0}),e.next=16;break;case 15:a.setState({invalidData:!0});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={isLogged:!1,invalidData:!1,termEmail:"",termPass:""},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return this.context.isLogged?s.a.createElement(h.a,{to:"/"}):s.a.createElement(A.a,null,"Logowanie",this.state.invalidData&&s.a.createElement(P,{header:"B\u0142\u0119dny email lub has\u0142o"}),s.a.createElement(M.a,{onSubmit:this.onFormSubmit},s.a.createElement(M.a.Input,{name:"email",type:"email",label:"Email",placeholder:"Email",value:this.state.termEmail,onChange:function(t){return e.setState({termEmail:t.target.value})}}),s.a.createElement(M.a.Input,{type:"password",label:"Has\u0142o",placeholder:"Has\u0142o",value:this.state.termPass,onChange:function(t){return e.setState({termPass:t.target.value})}}),s.a.createElement(L.a,{type:"submit"},"Zaloguj!")))}}]),t}(s.a.Component);T.contextType=j;var N=T,W=a(31),R=a.n(W),B=a(537),G=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).state={division:"WRO",divisions:[{text:"Wrocek",value:"WRO",selected:!0},{text:"Warszawka",value:"WAR"},{text:"Krak\xf3w",value:"KRA"}]},a.getDivisions=Object(l.a)(r.a.mark((function e(){var t,n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.get("/api/division");case 3:t=e.sent,n=t.data,console.log(n),l=n.filter((function(e){return"deleted"!==e.status})).map((function(e){var t=e._id;return{value:t,text:t}})),a.setState({divisions:l}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.onFormChange=function(e,t){e.target;var n=t.name,r=t.value;a.setState(Object(d.a)({},n,r))},a.onFormSubmit=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,l,o,s,i,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Object(c.a)(t.target,6),l=n[0],o=n[1],s=n[2],i=n[4],u=n[5],e.next=4,fetch("/api/register",{method:"POST",body:JSON.stringify({email:o.value,password:s.value,nickname:l.value,name:i.value,surname:u.value,division:a.state.division}),headers:{"Content-Type":"application/json"}});case 4:200===e.sent.status?alert("Konto utworzone, teraz we\u017a si\u0119 zaloguj"):alert("Error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.getDivisions()}},{key:"render",value:function(){return s.a.createElement(A.a,null,"Rejestracja",s.a.createElement(M.a,{onSubmit:this.onFormSubmit},s.a.createElement(M.a.Input,{name:"nickname",label:"Nick",placeholder:"Nick",onChange:this.onFormChange}),s.a.createElement(M.a.Input,{name:"email",type:"email",label:"Email",placeholder:"Email"}),s.a.createElement(M.a.Input,{type:"password",label:"Has\u0142o",placeholder:"Has\u0142o"}),s.a.createElement(M.a.Input,{type:"password",label:"Powt\xf3rz has\u0142o",placeholder:"Powt\xf3rz has\u0142o"}),s.a.createElement(M.a.Input,{label:"Imie",placeholder:"Imie"}),s.a.createElement(M.a.Input,{label:"Nazwisko",placeholder:"Nazwisko"}),s.a.createElement(M.a.Select,{name:"division",options:this.state.divisions,label:"Dywizja",value:this.state.division,onChange:this.onFormChange}),s.a.createElement(M.a.Field,null,s.a.createElement(B.a,{label:"Akceptuje regulamin i zgadzam si\u0119 z warunkami u\u017cytkowania"})),s.a.createElement(L.a,{type:"submit"},"Rejestruj!")))}}]),t}(s.a.Component),Z=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).showLoginBox=function(){a.setState({isLoginOpen:!0,isRegisterOpen:!1})},a.showRegisterBox=function(){a.setState({isLoginOpen:!1,isRegisterOpen:!0})},a.state={isLoginOpen:!0,isRegisterOpen:!1},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement(A.a,null,s.a.createElement(L.a,{onClick:this.showLoginBox},"Logowanie"),s.a.createElement(L.a,{onClick:this.showRegisterBox},"Rejestracja")),s.a.createElement(A.a,null,this.state.isLoginOpen&&s.a.createElement(N,null),this.state.isRegisterOpen&&s.a.createElement(G,null)))}}]),t}(s.a.Component),q=function(){return s.a.createElement(Z,null)},K=a(551),J=a(78),U=a(550),Y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e)))._gt=function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a._getTeams(t);case 3:n=e.sent,e.t0=t,e.next="forSelect"===e.t0?7:"all"===e.t0?11:15;break;case 7:return a.teams=n,a.teams.sort((function(e,t){return e.text.toLowerCase()<t.text.toLowerCase()?-1:1})),a.setState((function(){return 0===a.teams.length?{team:"",teamId:""}:{team:a.teams[0].text,teamId:a.teams[0].key}})),e.abrupt("break",16);case 11:return a.teamsAll=n,a.teamsAll.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})),a.setState((function(){return 0===a.teamsAll.length?{players:{first:{_id:"",name:""},second:{_id:"",name:""}},statistics:{matches:{won:0,lost:0},goals:{for:0,against:0}},leagues:[]}:{players:{first:{_id:a.teamsAll[0].players.first._id,name:"".concat(a.teamsAll[0].players.first.surname||"(brak)",", ").concat(a.teamsAll[0].players.first.name||"(brak)")},second:{_id:a.teamsAll[0].players.second._id,name:"".concat(a.teamsAll[0].players.second.surname||"(brak)",", ").concat(a.teamsAll[0].players.second.name||"(brak)")}},statistics:{matches:{won:a.teamsAll[0].statistics.matches.won,lost:a.teamsAll[0].statistics.matches.lost},goals:{for:a.teamsAll[0].statistics.goals.for,against:a.teamsAll[0].statistics.goals.against}},leagues:a.teamsAll[0].leagues}})),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),console.log("_gt: Co\u015b nie tak",e.t1.errmsg);case 21:case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),a.state={isMe:!1},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(){return{isMe:!!e.context.me}}))}},{key:"getUsers",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t=this,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,R()({url:"/api/users?division=".concat(this.context.me.division),method:"get",data:{},headers:{"x-auth-token":localStorage.token}}).then((function(e){t.users=e.data.map((function(e){return{key:e._id,value:"".concat(e.surname,", ").concat(e.name),text:"".concat(e._id,": ").concat(e.surname||"(brak)",", ").concat(e.name||"(brak)")}})).sort((function(e,t){return e.text.toLowerCase()<t.text.toLowerCase()?-1:1}))}),(function(e){console.log("getUsers->",e.errmsg)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getTeams",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n=this,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"names",l.length>1?l[1]:void 0,e.next=4,R()({url:"/api/teams/",method:"get",data:{},headers:{"x-auth-token":localStorage.token}}).then((function(e){switch(t){case"names":a=e.data.map((function(e){return e.name}));break;case"forSelect":a="admin"===n.context.me.role?e.data.map((function(e){return{key:e._id,value:e.name,text:e.name}})):e.data.filter((function(e){return e.players.first._id===n.context.me._id||e.players.second._id===n.context.me._id})).map((function(e){return{key:e._id,value:e.name,text:e.name}}));break;case"all":a="admin"===n.context.me.role?e.data:e.data.filter((function(e){return e.players.first._id===n.context.me._id||e.players.second._id===n.context.me._id}));break;default:a="admin"===n.context.me.role?e.data.map((function(e){return e.name})):e.data.filter((function(e){return e.players.first._id===n.context.me._id||e.players.second._id===n.context.me._id})).map((function(e){return e.name}))}}),(function(e){console.log("_getTeams->",e.errmsg)}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_getDivisions",value:function(){return[{key:"WRO",value:"WRO",text:"Wroc\u0142aw"},{key:"KRK",value:"KRK",text:"Krak\xf3w"},{key:"WAW",value:"WAW",text:"Warszawa"},{key:"League_Division_0",value:"League_Division_0",text:"League_Division_0"}]}}]),t}(s.a.Component);Y.contextType=j;var Q=Y,V=a(107),X=a(538),$=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).onInputChange=function(e){var t=e.target.value;a.setState((function(){return{errHeader:"",errMessage:"",newTeam:t}}))},a.onSelectChange=function(e,t){var n=t.value;switch(t.name){case"player1":a.setState((function(){return{player1:n,errHeader:"",errMessage:""}}));break;case"player2":a.setState((function(){return{player2:n,errHeader:"",errMessage:""}}))}},a.onFormSubmit=function(e,t){e.preventDefault(),"btnCancel"!==t.name&&a._validateForm()&&a._postTeam()},a.onClickCancel=function(e,t){a.setState((function(){return{term:"",newTeam:"",player1:"",player2:"",errHeader:"",errMessage:"",warnHeader:"",warnMessage:"",infoHeader:"",infoMessage:"",postSuccess:!1}}))},a.onClickDalej=function(e,t){a.setState((function(){return{term:"",newTeam:"",player1:"",player2:"",errHeader:"",errMessage:"",warnHeader:"",warnMessage:"",infoHeader:"",infoMessage:"",postSuccess:!1}}))},a._validateForm=function(){var e=!0,t=!0,n=a.state.newTeam;return n?a.teams.filter((function(e){return e.text===n})).length?(a.setState((function(){return{errHeader:"B\u0141\u0104D!",errMessage:"Dru\u017cyna o tej nazwie ju\u017c istnieje"}})),e=!1):a.setState((function(){return{errHeader:"",errMessage:""}})):(a.setState((function(){return{errHeader:"B\u0141\u0104D!",errMessage:"Dru\u017cyna musi mie\u0107 nazw\u0119"}})),e=!1),!!e&&(a.state.player1&&a.state.player2||(a.setState((function(){return{errHeader:"B\u0141\u0104D!",errMessage:"Musisz wskaza\u0107 obydwu graczy"}})),t=!1),a.state.player1&&a.state.player2&&a.state.player1===a.state.player2&&(a.setState((function(){return{warnHeader:"UWAGA!",warnMessage:"W\u0142a\u015bnie utworzy\u0142e\u015b dru\u017cyn\u0119 jednoosobow\u0105"}})),t=!0),t)},a.state={isMe:!1,term:"",newTeam:"",player1:"",player2:"",errHeader:"",errMessage:"",warnHeader:"",warnMessage:"",infoHeader:"",infoMessage:"",postSuccess:!1},a.teams=[],a._gt("forSelect"),a.users=[],a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(){return{isMe:!!e.context.me}})),this.getUsers()}},{key:"_postTeam",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()({url:"/api/teams/",method:"post",data:{name:this.state.newTeam,players:{first:this.users.filter((function(e){return e.value===t.state.player1}))[0].key,second:this.users.filter((function(e){return e.value===t.state.player2}))[0].key},status:"active"},headers:{"x-auth-token":localStorage.token}}).then((function(e){t.setState((function(){return{postSuccess:!0,infoHeader:"BRAWO!",infoMessage:"Dru\u017cyna zosta\u0142a zapisana"}}))}),(function(e){console.log("_postTeam",e.errmsg)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(A.a.Group,{horizontal:!0},s.a.createElement(A.a,null,s.a.createElement(M.a,{onSubmit:this.onFormSubmit},s.a.createElement(M.a.Group,null,s.a.createElement(M.a.Field,null,s.a.createElement(V.a,null,"Nazwa dru\u017cyny"),s.a.createElement(X.a,{type:"text",placeholder:"wprowad\u017a nazw\u0119 dru\u017cyny...",value:this.state.newTeam,onChange:function(t){e.onInputChange(t)}}))),s.a.createElement(M.a.Group,null,s.a.createElement(M.a.Field,null,s.a.createElement(V.a,null,"Wybierz graczy"),s.a.createElement(M.a.Group,{inline:!0},"admin"===this.context.me.role&&s.a.createElement(M.a.Dropdown,{key:"player1",name:"player1",placeholder:"wska\u017c gracza 1...",selection:!0,value:this.state.player1,options:this.users,onChange:function(t,a){return e.onSelectChange(t,a)}}),"player"===this.context.me.role&&s.a.createElement(M.a.Dropdown,{key:"player1",name:"player1",placeholder:"wska\u017c gracza 1...",selection:!0,value:this.state.player1,options:this.users.filter((function(t){return t.text==="".concat(e.context.me._id,": ").concat(e.context.me.surname,", ").concat(e.context.me.name)})),onChange:function(t,a){return e.onSelectChange(t,a)}}),s.a.createElement(M.a.Dropdown,{key:"player2",name:"player2",placeholder:"wska\u017c gracza 2...",selection:!0,value:this.state.player2,options:this.users,onChange:function(t,a){return e.onSelectChange(t,a)}}))))),this.state.errHeader+this.state.errMessage!==""&&s.a.createElement(M.a,{error:!0},s.a.createElement(I.a,{error:!0,header:this.state.errHeader,content:this.state.errMessage})),this.state.warnHeader+this.state.warnMessage!==""&&s.a.createElement(M.a,{warning:!0},s.a.createElement(I.a,{warning:!0,header:this.state.warnHeader,content:this.state.warnMessage})),this.state.infoHeader+this.state.infoMessage!==""&&s.a.createElement(M.a,{success:!0},s.a.createElement(I.a,{success:!0,header:this.state.infoHeader,content:this.state.infoMessage}),s.a.createElement(M.a.Button,{name:"btnDalej",onClick:this.onClickDalej},"Dalej")))),this.state.warnHeader+this.state.warnMessage+this.state.infoHeader+this.state.infoMessage===""&&s.a.createElement(M.a,null,s.a.createElement(M.a.Group,null,s.a.createElement(M.a.Button,{name:"btnSave",onClick:this.onFormSubmit},"Zapisz"),s.a.createElement(M.a.Button,{name:"btnCancel",onClick:this.onClickCancel},"Anuluj"))))}}]),t}(Q);$.contextType=j;var ee=$,te=a(546),ae=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={leagues:[]},a.refresh=function(){a.props.query().then((function(e){return a.setState({leagues:e})}))},a.componentDidMount=function(){a.refresh()},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(te.a,{celled:!0,textAlign:"center"},s.a.createElement(te.a.Header,null,s.a.createElement(te.a.Row,null,this.props.headers.map((function(e){return s.a.createElement(te.a.HeaderCell,{key:e.name,width:e.width},e.name)})))),s.a.createElement(te.a.Body,null,this.state.leagues.map((function(t){return s.a.createElement(e.props.row,{key:t._id,data:t,refresh:e.refresh})}))))}}]),t}(s.a.Component),ne=a(544),re=a(275),le=function(e){return e?re(e).format("DD.MM.YYYY"):"Brak"},ce=function(e){return s.a.createElement(ne.a,{open:e.open,onClose:e.onClose,closeOnDimmerClick:!1,size:"small"},s.a.createElement(ne.a.Header,null,e.header),e.children?s.a.createElement(ne.a.Content,null,e.children):"",s.a.createElement(ne.a.Actions,null,s.a.createElement(L.a,{onClick:function(){(e.onPositive||function(){})(),e.onClose()},positive:!0,labelPosition:"right",icon:"checkmark",content:e.positive}),s.a.createElement(L.a,{onClick:function(){(e.onNegative||function(){})(),e.onClose()},negative:!0,labelPosition:"right",icon:"close",content:e.negative})))},oe=a(545),se=a(60),ie=a.n(se),ue=function(e){var t=e.team,a=e.onClick;return s.a.createElement(oe.a,{as:"a",onClick:a,className:"team-view-grid-item"},s.a.createElement(A.a,null,s.a.createElement(J.a,{name:"users",size:"large"}),s.a.createElement(oe.a.Content,null,s.a.createElement(oe.a.Header,null,t.name),s.a.createElement(oe.a.Description,null,"Gracz: ",t.player," ",s.a.createElement("br",null),"Wyniki: ",function(e){var t=e.statistics.matches;return"".concat(t.won+t.lost,"/").concat(t.won,"/").concat(t.lost)}(t),"/",function(e){var t=e.statistics.goals;return"".concat(t.for,"/").concat(t.against,"/").concat(t.for-t.against)}(t)))))},me=function(e){return s.a.createElement(U.a.Row,null,e.teams.map((function(t){return s.a.createElement(U.a.Column,{key:"c_".concat(t.name)},s.a.createElement(ue,{team:t,onClick:e.onClickFactory(t)}))})))},he=function(e){return s.a.createElement(U.a,{columns:e.columns,textAlign:"center"},ie.a.chunk(e.teams,e.columns).map((function(t,a){return s.a.createElement(me,{key:"r_".concat(a),teams:t,onClickFactory:e.onClickFactory})})))},de=a(549);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var fe={isLoading:!1,results:[],value:""},ge=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state=fe,a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(fe);var e=new RegExp(ie.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:ie.a.filter(a.props.teams,(function(t){return e.test(t.name)||e.test(t.player)}))})}),300)},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props,{teams:a?n:this.props.teams});return s.a.createElement(U.a,{centered:!0},s.a.createElement(U.a.Row,null,s.a.createElement(de.a,{loading:t,onSearchChange:ie.a.debounce(this.handleSearchChange,300,{leading:!0}),results:n,value:a,open:!1,input:{placeholder:"Wyszukaj po nazwie dru\u017cyny lub gracza"}})),s.a.createElement(U.a.Row,null,s.a.createElement(he,r)))}}]),t}(s.a.Component);function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var be=function(e){var t=localStorage.getItem("id"),a=function(e){return e.players.first===t?e.players.second:e.players.first},n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var s=c.value;s.player=a(s)}}catch(i){r=!0,l=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return e},ye=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={askModalProps:{open:!1}},a.openModalFactory=function(e){return function(){a.setState({askModalProps:{header:"Czy chcesz si\u0119 zapisa\u0107 zespo\u0142em ".concat(e.name," do ligi ").concat(a.props.league.name,"?"),positive:"Tak",negative:"Nie",open:!0,onClose:a.closeModal,onPositive:function(){R()(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({url:"/api/leagues/".concat(a.props.league.name,"/team"),method:"POST"},O(),{data:{id:e._id}})).then((function(){a.props.refresh()})).finally((function(){a.props.onClose()}))}}})}},a.closeModal=function(){a.setState({askModalProps:{open:!1}})},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.a.createElement(ne.a,{open:this.props.open,onClose:this.props.onClose,closeOnDimmerClick:!1,closeIcon:!0},s.a.createElement(ne.a.Header,null,"Wybierz dru\u017cyn\u0119"),s.a.createElement(ne.a.Content,{scrolling:!0},s.a.createElement(ge,{columns:3,teams:this.props.teams,onClickFactory:this.openModalFactory})),s.a.createElement(ce,this.state.askModalProps),";")}}]),t}(s.a.Component),ve=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1,teams:[]},a.openModal=function(){R.a.get("/api/users/".concat(localStorage.getItem("id"),"/teams"),O()).then((function(e){return e.data})).then((function(e){return a.setState({teams:be(e),isModalOpen:!0})}))},a.closeModal=function(){a.setState({isModalOpen:!1})},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.refresh,n=le(t.date.created);return s.a.createElement(te.a.Row,null,s.a.createElement(te.a.Cell,null,t.name),s.a.createElement(te.a.Cell,null,t.description),s.a.createElement(te.a.Cell,null,t.owner),s.a.createElement(te.a.Cell,null,n),s.a.createElement(te.a.Cell,null,t.teams.length),s.a.createElement(te.a.Cell,{textAlign:"left"},t.isUserInLeague?s.a.createElement(V.a,{color:"green",ribbon:"right"},s.a.createElement(J.a,{name:"thumbs up",size:"large"}),t.userTeamInLeague):s.a.createElement(V.a,{as:"a",color:"blue",ribbon:"right",onClick:this.openModal},s.a.createElement(J.a,{name:"hand pointer",size:"large"}),"Do\u0142\u0105cz")),s.a.createElement(ye,{open:this.state.isModalOpen,onClose:this.closeModal,league:t,teams:this.state.teams,refresh:a}))}}]),t}(s.a.Component),we=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.data,t=le(e.date.created),a=le(e.date.started);return s.a.createElement(te.a.Row,null,s.a.createElement(te.a.Cell,null,e.name),s.a.createElement(te.a.Cell,null,e.description),s.a.createElement(te.a.Cell,null,e.owner),s.a.createElement(te.a.Cell,null,t),s.a.createElement(te.a.Cell,null,a),s.a.createElement(te.a.Cell,null,e.teams.length),s.a.createElement(te.a.Cell,{textAlign:"left"},s.a.createElement(V.a,{as:"a",color:"blue",ribbon:"right"},s.a.createElement(J.a,{name:"hand pointer",size:"large"}),"Akcja")))}}]),t}(s.a.Component),ke=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.data,t=le(e.date.created),a=le(e.date.started),n=le(e.date.closed);return s.a.createElement(te.a.Row,null,s.a.createElement(te.a.Cell,null,e.name),s.a.createElement(te.a.Cell,null,e.description),s.a.createElement(te.a.Cell,null,e.owner),s.a.createElement(te.a.Cell,null,t),s.a.createElement(te.a.Cell,null,a),s.a.createElement(te.a.Cell,null,n),s.a.createElement(te.a.Cell,{textAlign:"left"},s.a.createElement(V.a,{as:"a",color:"blue",ribbon:"right"},s.a.createElement(J.a,{name:"hand pointer",size:"large"}),"Akcja")))}}]),t}(s.a.Component),je=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.data,t=le(e.date.created),a=le(e.date.started),n=le(e.date.closed);return s.a.createElement(te.a.Row,null,s.a.createElement(te.a.Cell,null,e.name),s.a.createElement(te.a.Cell,null,e.description),s.a.createElement(te.a.Cell,null,t),s.a.createElement(te.a.Cell,null,a),s.a.createElement(te.a.Cell,null,n),s.a.createElement(te.a.Cell,null,e.status),s.a.createElement(te.a.Cell,null,e.teams.length),s.a.createElement(te.a.Cell,{textAlign:"left"},s.a.createElement(V.a,{as:"a",color:"blue",ribbon:"right"},s.a.createElement(J.a,{name:"hand pointer",size:"large"}),"Akcja")))}}]),t}(s.a.Component),Oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).fetchLeagues=function(){return a.props.query()},a.componentDidMount=function(){a.setState((function(){return{leagues:a.fetchLeagues()}}))},a}return Object(b.a)(t,e),t}(ae),Ce=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return function(e){var t={headers:[{width:3,name:"Nazwa"},{width:3,name:"Opis"},{width:2,name:"Tw\xf3rca"},{width:2,name:"Data utworzenia"},{width:2,name:"Data rozpocz\u0119cia"},{width:2,name:"Data zako\u0144czenia"},{width:2,name:"Wyniki"}],query:function(){return e},row:ke};return s.a.createElement(Oe,t)}(this.props.leagues)}}]),t}(Q);Ce.contextType=j;var Se=Ce,xe=a(540),ze=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).onSelectChange=function(e,t){var n=t.value,r=(t.name,a.teams.map((function(e){return e.value})).indexOf(n)),l=a.teams[r].key,c=a.teamsAll.map((function(e){return e._id})).indexOf(l),o=a.teamsAll[c].players,s=a.teamsAll[c].statistics,i=a.teamsAll[c].leagues;a.setState((function(){return{team:n,errHeader:"",errMessage:"",teamId:l,players:{first:{_id:o.first._id,name:"".concat(o.first.surname||"(brak)",", ").concat(o.first.name||"(brak)")},second:{_id:o.second._id,name:"".concat(o.second.surname||"(brak)",", ").concat(o.second.name||"(brak)")}},statistics:{matches:{won:s.matches.won||0,lost:s.matches.lost||0},goals:{for:s.goals.for||0,against:s.goals.against||0}},leagues:i}}))},a.onClickEdit=function(e,t){a.setState((function(){return{editable:!a.state.editable}}))},a.onClickCancel=function(e,t){a.state.editable&&a.setState((function(){return{editable:!1}}))},a.onFormSubmit=function(e,t){e.preventDefault()},a.state={isMe:!1,editable:!1,term:"",team:"",teamId:0,players:{first:{_id:"",name:""},second:{_id:"",name:""}},statistics:{matches:{won:0,lost:0},goals:{for:0,against:0}},leagues:[]},a.teams=[],a.teamsAll=[],a._gt("forSelect"),a._gt("all"),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(){return{isMe:!!e.context.me}}))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(A.a.Group,{horizontal:!0,width:12},s.a.createElement(A.a,null,s.a.createElement(M.a,{onSubmit:this.onFormSubmit}),s.a.createElement(M.a.Group,null,s.a.createElement(M.a.Field,null,s.a.createElement(V.a,null,"Zg\u0142oszone dru\u017cyny"),s.a.createElement(M.a.Dropdown,{key:"teamsSelect",name:"teamsSelect",selection:!0,value:this.state.team,options:this.teams,onChange:function(t,a){return e.onSelectChange(t,a)}})))),s.a.createElement(A.a,null,s.a.createElement(M.a.Group,null,s.a.createElement(xe.a,{horizontal:!0},s.a.createElement(K.a,{as:"h4"},s.a.createElement(J.a,{name:"group"}),"Gracze")),s.a.createElement(X.a,{label:"Gracz 1:",value:this.state.players.first.name,readOnly:!0}),s.a.createElement(X.a,{label:"Gracz 2:",value:this.state.players.second.name,readOnly:!0})),s.a.createElement("br",null),s.a.createElement(xe.a,{horizontal:!0},s.a.createElement(K.a,{as:"h4"},s.a.createElement(J.a,{name:"columns"}),"Ligi")),0===this.state.leagues.length&&s.a.createElement(I.a,{info:!0},s.a.createElement("p",null,"Wygl\u0105da na to, \u017ce dru\u017cyny nie przypisano do \u017cadnej ligi")),0!==this.state.leagues.length&&s.a.createElement(Se,{leagues:this.state.leagues}),s.a.createElement("br",null),s.a.createElement(xe.a,{horizontal:!0},s.a.createElement(K.a,{as:"h4"},s.a.createElement(J.a,{name:"bar chart"}),"Statystyka")),s.a.createElement(te.a,{celled:!0,textAlign:"center"},s.a.createElement(te.a.Header,null,s.a.createElement(te.a.Row,null,s.a.createElement(te.a.HeaderCell,{colSpan:2},"Mecze"),s.a.createElement(te.a.HeaderCell,{colSpan:2},"Bramki")),s.a.createElement(te.a.Row,null,s.a.createElement(te.a.HeaderCell,null,"Wygrane"),s.a.createElement(te.a.HeaderCell,null,"Przegrane"),s.a.createElement(te.a.HeaderCell,null,"Zdobyte"),s.a.createElement(te.a.HeaderCell,null,"Stracone"))),s.a.createElement(te.a.Body,null,s.a.createElement(te.a.Row,null,s.a.createElement(te.a.Cell,null,this.state.statistics.matches.won),s.a.createElement(te.a.Cell,null,this.state.statistics.matches.lost),s.a.createElement(te.a.Cell,null,this.state.statistics.goals.for),s.a.createElement(te.a.Cell,null,this.state.statistics.goals.against)))))),s.a.createElement(M.a,null,s.a.createElement(M.a.Group,null,!this.state.editable&&s.a.createElement(M.a.Button,{name:"btnEdit",onClick:this.onClickEdit},"Edytuj"),this.state.editable&&s.a.createElement(s.a.Fragment,null,s.a.createElement(M.a.Button,{name:"btnSave",onClick:this.onFormSubmit},"Zapisz"),s.a.createElement(M.a.Button,{name:"btnCancel",onClick:this.onClickCancel},"Anuluj")))))}}]),t}(Q);ze.contextType=j;var De=ze,Ae=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).onInputChange=function(e){a.props.onChange(a.state.term)},a.onSelectChange=function(e,t){t.value,t.name;a.props.onChange(a.state.term)},a.onFormSubmit=function(){a.props.onSubmit(a.state.term)},a.onClickCancel=function(){a.props.onSubmit(a.state.term)},a.handleItemClick=function(e,t){var n=t.name;return a.setState((function(){return{activeItem:n}}))},a.state={term:"",activeItem:"przejrzyj",isMe:!1},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(){return{isMe:!!e.context.me}}))}},{key:"render",value:function(){var e=this.state.activeItem;return s.a.createElement("div",{className:"container",style:{textAlign:"left"}},s.a.createElement(K.a,{as:"h2",textAlign:"center",style:{paddingLeft:"40px"}},s.a.createElement(J.a,{name:"group"}),s.a.createElement(K.a.Content,null,"Zarz\u0105dzanie dru\u017cynami")),!this.state.isMe&&s.a.createElement(A.a,null,'Zr\xf3b co\u015b, bo nie wida\u0107 "',s.a.createElement("i",null,"context.me"),'"'),this.state.isMe&&s.a.createElement(I.a,null,s.a.createElement("p",null,"Jese\u015b zalogowany jako: ",s.a.createElement("strong",null,this.context.me._id),", rola: ",s.a.createElement("strong",null,this.context.me.role),", dywizja: ",s.a.createElement("strong",null,this.context.me.division))),s.a.createElement(A.a,null,s.a.createElement(U.a,null,s.a.createElement(U.a.Column,{stretched:!0,width:2},s.a.createElement(C.a,{fluid:!0,vertical:!0,tabular:!0},s.a.createElement(C.a.Item,{name:"przejrzyj",active:"przejrzyj"===e,onClick:this.handleItemClick}),s.a.createElement(C.a.Item,{name:"dodaj",active:"dodaj"===e,onClick:this.handleItemClick}))),s.a.createElement(U.a.Column,{stretched:!0,width:14},"dodaj"===this.state.activeItem&&s.a.createElement(ee,null),"przejrzyj"===this.state.activeItem&&s.a.createElement(De,null)))))}}]),t}(Q);Ae.contextType=j;var Me=function(){return s.a.createElement(Ae,null)},Le=function(e){return s.a.createElement(h.d,null,e.routing.map((function(e){return s.a.createElement(z,{key:e.path,path:e.path,component:e.component})})),s.a.createElement(h.b,{render:function(){return s.a.createElement(h.a,{to:e.routing[0].path||"/"})}}))},Ie=function(e){return s.a.createElement(C.a,{fluid:!0,vertical:!0,tabular:!0},e.routing.map((function(e){return s.a.createElement(C.a.Item,{key:e.path,as:m.c,name:e.name,to:e.path,activeClassName:"active"})})))},_e=function(e){return s.a.createElement("div",null,s.a.createElement(U.a,null,s.a.createElement(U.a.Column,{width:3},s.a.createElement(Ie,{routing:e.routing})),s.a.createElement(U.a.Column,{stretched:!0,width:13},s.a.createElement(Le,{routing:e.routing}))))},Pe=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n,l,o,s,i,u,m,h,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage.getItem("id"),a=!0,n=!1,r=void 0;try{for(var l,c=e.teams[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var o=l.value,s=o.team;if(t===s.players.first||t===s.players.second)return[!0,s.name]}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return[!1,""]},e.next=3,R.a.get('/api/leagues/?status=created&with=["team"]',O()).then((function(e){return e.data}));case 3:for(a=e.sent,n=!0,l=!1,o=void 0,e.prev=7,s=a[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)u=i.value,m=t(u),h=Object(c.a)(m,2),d=h[0],p=h[1],u.isUserInLeague=d,u.userTeamInLeague=p;e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),l=!0,o=e.t0;case 15:e.prev=15,e.prev=16,n||null==s.return||s.return();case 18:if(e.prev=18,!l){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})));return function(){return e.apply(this,arguments)}}(),He=function(){var e={headers:[{width:3,name:"Nazwa"},{width:4,name:"Opis"},{width:3,name:"Tw\xf3rca"},{width:3,name:"Data utworzenia"},{width:1,name:"Zapisanych dru\u017cyn"},{width:2,name:"Dru\u017cyna"}],query:Pe,row:ve};return s.a.createElement(ae,e)},Fe=function(){var e={headers:[{width:3,name:"Nazwa"},{width:3,name:"Opis"},{width:3,name:"Tw\xf3rca"},{width:2,name:"Data utworzenia"},{width:2,name:"Data rozpocz\u0119cia"},{width:1,name:"Zapisanych dru\u017cyn"},{width:2,name:"Info"}],query:function(){return R.a.get("/api/leagues/?status=pending",O()).then((function(e){return e.data}))},row:we};return s.a.createElement(ae,e)},Te=function(){var e={headers:[{width:3,name:"Nazwa"},{width:3,name:"Opis"},{width:2,name:"Tw\xf3rca"},{width:2,name:"Data utworzenia"},{width:2,name:"Data rozpocz\u0119cia"},{width:2,name:"Data zako\u0144czenia"},{width:2,name:"Wyniki"}],query:function(){return R.a.get("/api/leagues/?status=closed",O()).then((function(e){return e.data}))},row:ke};return s.a.createElement(ae,e)},Ne=function(){var e={headers:[{width:2,name:"Nazwa"},{width:2,name:"Opis"},{width:2,name:"Data utworzenia"},{width:2,name:"Data rozpocz\u0119cia"},{width:2,name:"Data zako\u0144czenia"},{width:2,name:"Status"},{width:2,name:"Dru\u017cyny"},{width:2,name:"Akcje"}],query:function(){return R.a.get("/api/leagues/?status=owner",O()).then((function(e){return e.data}))},row:je};return s.a.createElement(ae,e)},We=function(e){var t=e.match.path,a=[{name:"Otwarte",path:"".concat(t,"/Open"),component:He},{name:"Trwaj\u0105ce",path:"".concat(t,"/Pending"),component:Fe},{name:"Zako\u0144czone",path:"".concat(t,"/Closed"),component:Te},{name:"Moje",path:"".concat(t,"/Owner"),component:Ne}];return s.a.createElement(A.a,null," ",s.a.createElement(_e,{routing:a})," ")},Re=function(){return s.a.createElement("div",null,"Schedule")},Be=a(553),Ge=a(541),Ze=function(e){var t=e.text,a=void 0===t?"":t;return s.a.createElement(Be.a,{active:!0},s.a.createElement(Ge.a,{content:a}))},qe=a(539),Ke=a(285),Je=a.n(Ke),Ue=(a(525),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",description:"",startDate:"",postSuccessful:!1},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(d.a)({},r,n))},a.handleDateChange=function(e){a.setState({startDate:e})},a.onFormSubmit=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R()({url:"/api/leagues",method:"post",data:{name:a.state.name,description:a.state.description,date:{started:a.state.startDate}},headers:{"x-auth-token":localStorage.getItem("token")}}).then((function(e){alert("Za\u0142o\u017cone!!\n            ".concat(e.data.owner.name," - jeste\u015b s\u0119dzi\u0105 g\u0142\xf3wnym w lidze: ").concat(e.data.name)),a.setState({postSuccessful:!0})})).catch((function(e){alert(e.response.data[0].message||e.response.data)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.state.postSuccessful?s.a.createElement(h.a,{to:"/"}):s.a.createElement("div",{className:"container"},s.a.createElement(M.a,{onSubmit:this.onFormSubmit},s.a.createElement(M.a.Group,{widths:"equal"},s.a.createElement(M.a.Input,{name:"name",maxLength:"30",control:X.a,label:"Nazwa",placeholder:"Jak nazwiesz lig\u0119?",onChange:this.handleInputChange}),s.a.createElement(Je.a,{control:M.a.Input,selected:this.state.startDate,onChange:this.handleDateChange,minDate:Date.now(),label:"Data startu",placeholderText:"Kiedy zaczynacie?"})),s.a.createElement(M.a.Input,{name:"description",control:qe.a,maxLength:"255",label:"Opis (opcjonalny)",placeholder:"Dodaj kilka s\u0142\xf3w, je\u015bli chcesz",onChange:this.handleInputChange}),s.a.createElement(L.a,{type:"submit",id:"submit",content:"Za\u0142\xf3\u017c"})))}}]),t}(s.a.Component)),Ye=function(){return s.a.createElement(Ue,null)},Qe=a(147),Ve=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).gl=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getLeagues(t);case 3:n=e.sent,e.t0=t,e.next="forSelect"===e.t0?7:"all"===e.t0?10:13;break;case 7:return a.league=n.sort((function(e,t){return e.text.toLowerCase()<t.text.toLowerCase()?-1:1})),a.setState((function(){return{league:a.league[0].text,leagueId:a.league[0].key}})),e.abrupt("break",14);case 10:if(a.leagueAll=n.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})),a.leagueAll[0].teams.length>0)for(l=function(e){var t=a.leagueAll[0].teams[e];a.setState((function(){return{data:[].concat(Object(Qe.a)(a.state.data),[{team:t.team.name,points:3*t.statistics.matches.won,matchesPlayed:t.statistics.matches.won+t.statistics.matches.lost,matchesWon:t.statistics.matches.won,matchesLost:t.statistics.matches.lost,goalsFor:t.statistics.goals.for,goalsAgainst:t.statistics.goals.against}])}}))},c=0;c<a.leagueAll[0].teams.length;c++)l(c);return e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),console.log("gl: B\u0142\u0105d",e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"getLeagues",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"names",e.next=3,R()({url:"/api/leagues/",method:"get",data:{},headers:{"x-auth-token":localStorage.token}}).then((function(e){switch(t){case"names":a=e.data.map((function(e){return e.name}));break;case"forSelect":a=e.data.map((function(e){return{key:e._id,value:e.name,text:e.name}}));break;case"all":a=e.data;break;default:a=e.data.map((function(e){return e.name}))}}),(function(e){console.log("Error taki:",e.errmsg)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(s.a.Component);Ve.contextType=j;var Xe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).handleSort=function(e){return function(){var t=a.state,n=t.column,r=t.data,l=t.direction;n===e?a.setState({data:r.reverse(),direction:"ascending"===l?"descending":"ascending"}):a.setState({column:e,data:ie.a.sortBy(r,[e]),direction:"ascending"})}},a.onSelectChange=function(e,t){var n=t.value,r=a.league.map((function(e){return e.value})).indexOf(n),l=a.league[r].key,c=a.leagueAll.map((function(e){return e._id})).indexOf(l),o=a.leagueAll[c].teams;a.prepareState(o),o.length>0?a.setState((function(){return{league:n,data:a.state.data}})):a.setState((function(){return{league:n,data:[{team:"Brak dru\u017cyn w lidze",points:0,matchesPlayed:0,matchesWon:0,matchesLost:0,goalsFor:0,goalsAgainst:0}]}}))},a.prepareState=function(e){for(var t=0;t<e.length;t++){var n=e[t].statistics,r=e[t].team;a.state.data=0===t?[a.newStateData(r,n)]:[].concat(Object(Qe.a)(a.state.data),[a.newStateData(r,n)])}},a.newStateData=function(e,t){return{team:e.name,points:3*t.matches.won,matchesPlayed:t.matches.won+t.matches.lost,matchesWon:t.matches.won,matchesLost:t.matches.lost,goalsFor:t.goals.for,goalsAgainst:t.goals.against}},a.onFormSubmit=function(e){e.preventDefault()},a.state={column:null,direction:null,league:"",data:[{team:"Brak dru\u017cyn w lidze",points:0,matchesPlayed:0,matchesWon:0,matchesLost:0,goalsFor:0,goalsAgainst:0}]},a.league=[],a.leagueAll=[],a.gl("forSelect"),a.gl("all"),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.column,n=t.data,r=t.direction;return s.a.createElement("div",{className:"container",style:{textAlign:"left"}},s.a.createElement(K.a,{as:"h2",textAlign:"center",style:{paddingLeft:"40px"}},s.a.createElement(J.a,{name:"ordered list"}),s.a.createElement(K.a.Content,null,"Przejrzyj wyniki")),s.a.createElement(A.a,null,s.a.createElement(M.a,{onSubmit:this.onFormSubmit}),s.a.createElement(M.a.Group,null,s.a.createElement(M.a.Field,null,s.a.createElement(V.a,null,"Lista lig"),s.a.createElement(M.a.Dropdown,{key:"leagueSelect",name:"leagueSelect",selection:!0,value:this.state.league,options:this.league,onChange:function(t,a){return e.onSelectChange(t,a)}})))),s.a.createElement(te.a,{sortable:!0,celled:!0,fixed:!0},s.a.createElement(te.a.Header,null,s.a.createElement(te.a.Row,null,s.a.createElement(te.a.HeaderCell,{sorted:"team"===a?r:null,onClick:this.handleSort("team")},"Nazwa Dru\u017cyny"),s.a.createElement(te.a.HeaderCell,{sorted:"points"===a?r:null,onClick:this.handleSort("points")},"Punkty"),s.a.createElement(te.a.HeaderCell,{sorted:"matchesPlayed"===a?r:null,onClick:this.handleSort("matchesPlayed")},"Rozegrane mecze"),s.a.createElement(te.a.HeaderCell,{sorted:"matchesWon"===a?r:null,onClick:this.handleSort("matchesWon")},"Wygrane mecze"),s.a.createElement(te.a.HeaderCell,{sorted:"matchesLost"===a?r:null,onClick:this.handleSort("matchesLost")},"Przegrane mecze"),s.a.createElement(te.a.HeaderCell,{sorted:"goalsFor"===a?r:null,onClick:this.handleSort("goalsFor")},"Strzelone bramki"),s.a.createElement(te.a.HeaderCell,{sorted:"goalsAgainst"===a?r:null,onClick:this.handleSort("goalsAgainst")},"Stracone bramki"))),s.a.createElement(te.a.Body,null,ie.a.map(n,(function(e){var t=e.team,a=e.points,n=e.matchesPlayed,r=e.matchesWon,l=e.matchesLost,c=e.goalsFor,o=e.goalsAgainst;return s.a.createElement(te.a.Row,{key:a},s.a.createElement(te.a.Cell,null,t),s.a.createElement(te.a.Cell,null,a),s.a.createElement(te.a.Cell,null,n),s.a.createElement(te.a.Cell,null,r),s.a.createElement(te.a.Cell,null,l),s.a.createElement(te.a.Cell,null,c),s.a.createElement(te.a.Cell,null,o))})))))}}]),t}(Ve),$e=function(){return s.a.createElement(Xe,null)},et=a(542);u.a.render(s.a.createElement(k,null,s.a.createElement((function(){var e=Object(o.useContext)(j),t=e.isLogged,a=e.changeStore,n=Object(o.useState)(t),i=Object(c.a)(n,2),u=i[0],d=i[1];return Object(o.useEffect)((function(){t&&(Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/login/me",O());case 3:if(400!==(t=e.sent).status){e.next=9;break}return localStorage.removeItem("token"),a("isLogged",!1),a("me",null),e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,a("isLogged",!0),a("me",n),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Serwer nie odpowiada"),console.error("Error",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))(),d(!1))}),[a,t]),s.a.createElement(m.a,null,s.a.createElement(et.a,null,s.a.createElement(S,null),u?s.a.createElement(Ze,null):s.a.createElement(h.d,null,s.a.createElement(h.b,{path:"/login",component:q}),s.a.createElement(z,{path:"/Schedule",component:Re}),s.a.createElement(z,{path:"/Leagues",component:We}),s.a.createElement(z,{path:"/Teams",component:Me}),s.a.createElement(z,{exact:!0,path:"/",component:D}),s.a.createElement(z,{exact:!0,path:"/NewLeague",component:Ye}),s.a.createElement(z,{exact:!0,path:"/Scores",component:$e}),s.a.createElement(h.b,{render:function(){return s.a.createElement(h.a,{to:"/"})}}))))}),null)),document.querySelector("#root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.4d64d6db.chunk.js.map